{
    "collab_server" : "",
    "contents" : "library(tidyverse)\n\ndf <- read_csv(\"pr_debt.csv\") %>%\n  arrange(desc(debt))\n\n#лимит по итоговой сумме 50%\nlim <- colSums(df[, 3]) * 0.5\n\n#расчет суммы долга наростающим итогом по ранжированной БД\n#http://stackoverflow.com/questions/25829787/r-how-to-take-top-values-by-group-until-its-sum-exceeds-a-value\ncumul <- with(df, ave(debt, FUN = cumsum))\n\n#топ-список предприятий, которые в сумме дают более 50% долга\ntop <- df[cumul <= lim, ]\n\nwrite_csv(top, \"top_pr.csv\")\n",
    "created" : 1487070794510.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4252945242",
    "id" : "32C954C3",
    "lastKnownWriteTime" : 1486930541,
    "last_content_update" : 1486930541,
    "path" : "D:/OneDrive/my_git_repos/tax_debt/pr_debt_cleaning.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}